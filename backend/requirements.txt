# FastAPI Backend Dependencies
# For offline-first Vietnamese speech analysis webapp

# === Web Framework ===
fastapi[all]==0.104.1      # FastAPI framework với tất cả optional dependencies
uvicorn[standard]==0.24.0   # ASGI server với HTTP/2, WebSocket support

# === Machine Learning ===
# Updated for Python 3.13 compatibility
torch>=2.6.0                # PyTorch for model inference (2.6+ required for Python 3.13)
torchvision>=0.21.0        # Vision utilities (nếu cần xử lý spectrogram)  
torchaudio>=2.6.0          # Audio processing utilities
transformers>=4.50.0       # Hugging Face transformers (>=4.50 for tokenizers 0.22 compatibility)
# tokenizers 0.22+ has pre-built wheels for Python 3.13

# === ONNX Runtime Optimization (Phase 1) ===
# Updated for Python 3.13 compatibility
optimum[onnxruntime]>=1.16.0  # Hugging Face Optimum for ONNX export & quantization
onnxruntime>=1.20.0           # ONNX Runtime for 2-4x faster inference (1.20+ for Python 3.13)
# onnxruntime-gpu>=1.20.0     # GPU accelerated (uncomment if using CUDA)

# === Configuration & Logging ===
pydantic-settings==2.0.3   # PydanticSettings cho env-based configuration
structlog==23.2.0          # Structured logging cho production
psutil==5.9.6             # Task 12: System/process metrics collection

# === WebSocket & Real-time ===
websockets==12.0           # WebSocket support (included trong fastapi[all] nhưng explicit)
python-multipart==0.0.6   # Form data parsing nếu cần upload files

# === Development & Testing ===
pytest==7.4.3             # Testing framework
pytest-asyncio==0.21.1    # Async testing support
httpx==0.25.2             # HTTP client cho testing APIs

# === Audio Processing ===
librosa==0.10.1           # Audio analysis utilities (nếu cần advanced audio processing)
soundfile==0.12.1         # Audio file I/O support
# pydub removed - torchaudio+ffmpeg backend handles all formats directly

# === Utilities ===
python-dotenv==1.0.0      # Load environment variables từ .env file (if needed)
click==8.1.7              # CLI utilities (included trong fastapi nhưng ng explicit)
huggingface-hub>=0.26.0   # Download models từ Hugging Face Hub (required by download_models.py)

# === Optional Production Dependencies ===
# gunicorn==21.2.0         # Production WSGI server (uncomment nếu deploy)
# psutil==5.9.6            # System monitoring (uncomment nếu cần monitor resources)
# redis==5.0.1             # Caching layer (uncomment nếu cần caching)

# === Development Tools (Optional) ===
# black==23.11.0           # Code formatter
# ruff==0.1.6              # Fast Python linter
# mypy==1.7.1              # Type checking